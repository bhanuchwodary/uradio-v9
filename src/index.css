@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Material Design 3 Light Theme Colors */
    --background: 254 254 254;
    --foreground: 16 16 16;
    
    --surface: 254 254 254;
    --surface-dim: 231 231 231;
    --surface-bright: 254 254 254;
    --surface-container-lowest: 255 255 255;
    --surface-container-low: 247 247 247;
    --surface-container: 241 241 241;
    --surface-container-high: 236 236 236;
    --surface-container-highest: 230 230 230;
    
    --on-surface: 16 16 16;
    --on-surface-variant: 68 68 68;
    
    --primary: 103 80 164;
    --primary-container: 234 221 255;
    --on-primary: 255 255 255;
    --on-primary-container: 33 0 93;
    
    --secondary: 98 91 113;
    --secondary-container: 231 222 248;
    --on-secondary: 255 255 255;
    --on-secondary-container: 30 25 43;
    
    --tertiary: 125 82 96;
    --tertiary-container: 255 216 228;
    --on-tertiary: 255 255 255;
    --on-tertiary-container: 55 11 30;
    
    --error: 186 26 26;
    --error-container: 255 218 214;
    --on-error: 255 255 255;
    --on-error-container: 65 0 2;
    
    --outline: 121 116 126;
    --outline-variant: 196 199 197;
    
    /* Legacy compatibility */
    --card: var(--surface-container);
    --card-foreground: var(--on-surface);
    --popover: var(--surface-container);
    --popover-foreground: var(--on-surface);
    --muted: var(--surface-container-high);
    --muted-foreground: var(--on-surface-variant);
    --accent: var(--secondary-container);
    --accent-foreground: var(--on-secondary-container);
    --destructive: var(--error);
    --destructive-foreground: var(--on-error);
    --border: var(--outline-variant);
    --input: var(--outline-variant);
    --ring: var(--primary);
    --radius: 1rem;

    /* Sidebar colors */
    --sidebar-background: var(--surface-container);
    --sidebar-foreground: var(--on-surface);
    --sidebar-primary: var(--primary);
    --sidebar-primary-foreground: var(--on-primary);
    --sidebar-accent: var(--secondary-container);
    --sidebar-accent-foreground: var(--on-secondary-container);
    --sidebar-border: var(--outline-variant);
    --sidebar-ring: var(--primary);
  }

  .dark {
    /* Material Design 3 Dark Theme Colors */
    --background: 16 16 20;
    --foreground: 230 225 229;
    
    --surface: 16 16 20;
    --surface-dim: 16 16 20;
    --surface-bright: 59 56 62;
    --surface-container-lowest: 10 10 13;
    --surface-container-low: 22 22 26;
    --surface-container: 30 29 32;
    --surface-container-high: 40 39 43;
    --surface-container-highest: 49 48 51;
    
    --on-surface: 230 225 229;
    --on-surface-variant: 196 199 197;
    
    --primary: 208 188 255;
    --primary-container: 79 55 139;
    --on-primary: 56 30 114;
    --on-primary-container: 234 221 255;
    
    --secondary: 203 194 220;
    --secondary-container: 74 68 88;
    --on-secondary: 51 45 65;
    --on-secondary-container: 231 222 248;
    
    --tertiary: 227 187 200;
    --tertiary-container: 99 59 72;
    --on-tertiary: 80 37 50;
    --on-tertiary-container: 255 216 228;
    
    --error: 255 180 171;
    --error-container: 147 0 10;
    --on-error: 105 0 5;
    --on-error-container: 255 218 214;
    
    --outline: 147 143 153;
    --outline-variant: 68 71 78;
    
    /* Legacy compatibility */
    --card: var(--surface-container);
    --card-foreground: var(--on-surface);
    --popover: var(--surface-container);
    --popover-foreground: var(--on-surface);
    --muted: var(--surface-container-high);
    --muted-foreground: var(--on-surface-variant);
    --accent: var(--secondary-container);
    --accent-foreground: var(--on-secondary-container);
    --destructive: var(--error);
    --destructive-foreground: var(--on-error);
    --border: var(--outline-variant);
    --input: var(--outline-variant);
    --ring: var(--primary);

    /* Sidebar colors */
    --sidebar-background: var(--surface-container);
    --sidebar-foreground: var(--on-surface);
    --sidebar-primary: var(--primary);
    --sidebar-primary-foreground: var(--on-primary);
    --sidebar-accent: var(--secondary-container);
    --sidebar-accent-foreground: var(--on-secondary-container);
    --sidebar-border: var(--outline-variant);
    --sidebar-ring: var(--primary);
  }

  .metallic {
    /* Black Metallic Theme */
    --background: 20 20 22; /* #141416 */
    --foreground: 220 220 220; /* #dcdcdc */
    
    --surface: 28 28 30; /* #1c1c1e */
    --surface-dim: 20 20 22;
    --surface-bright: 52 52 56;
    --surface-container-lowest: 16 16 18; /* #101012 */
    --surface-container-low: 28 28 30;
    --surface-container: 36 36 40; /* #242428 */
    --surface-container-high: 44 44 48; /* #2c2c30 */
    --surface-container-highest: 52 52 56; /* #343438 */
    
    --on-surface: 220 220 220;
    --on-surface-variant: 180 180 180;
    
    --primary: 176 190 197; /* #b0bec5 - Blue Grey 100 */
    --primary-container: 55 71 79; /* #37474f - Blue Grey 800 */
    --on-primary: 10 10 10;
    --on-primary-container: 207 216 220; /* #cfd8dc - Blue Grey 50 */
    
    --secondary: 158 158 158; /* #9e9e9e - Grey 500 */
    --secondary-container: 69 90 100; /* #455a64 - Blue Grey 700 */
    --on-secondary: 10 10 10;
    --on-secondary-container: 207 216 220; /* #cfd8dc */
    
    --tertiary: 227 187 200;
    --tertiary-container: 99 59 72;
    --on-tertiary: 80 37 50;
    --on-tertiary-container: 255 216 228;
    
    --error: 255 180 171;
    --error-container: 147 0 10;
    --on-error: 105 0 5;
    --on-error-container: 255 218 214;
    
    --outline: 97 97 97; /* #616161 */
    --outline-variant: 70 70 70; /* #464646 */
    
    /* Legacy compatibility */
    --card: var(--surface-container);
    --card-foreground: var(--on-surface);
    --popover: var(--surface-container);
    --popover-foreground: var(--on-surface);
    --muted: var(--surface-container-high);
    --muted-foreground: var(--on-surface-variant);
    --accent: var(--secondary-container);
    --accent-foreground: var(--on-secondary-container);
    --destructive: var(--error);
    --destructive-foreground: var(--on-error);
    --border: var(--outline-variant);
    --input: var(--outline-variant);
    --ring: var(--primary);

    /* Sidebar colors */
    --sidebar-background: var(--surface-container);
    --sidebar-foreground: var(--on-surface);
    --sidebar-primary: var(--primary);
    --sidebar-primary-foreground: var(--on-primary);
    --sidebar-accent: var(--secondary-container);
    --sidebar-accent-foreground: var(--on-secondary-container);
    --sidebar-border: var(--outline-variant);
    --sidebar-ring: var(--primary);
  }
}

@layer base {
  * {
    @apply border-border;
  }

  html, body, #root {
    @apply h-full w-full m-0 p-0 overflow-x-hidden font-sans;
    -webkit-overflow-scrolling: touch;
    -webkit-text-size-adjust: 100%;
    -webkit-tap-highlight-color: transparent;
    font-family: 'Inter', ui-sans-serif, system-ui, sans-serif;
    font-size: max(16px, 1rem);
    scroll-behavior: smooth;
  }

  body {
    @apply bg-background text-foreground antialiased;
    text-rendering: optimizeLegibility;
    font-variant-ligatures: common-ligatures;
    font-feature-settings: "kern", "liga", "tnum";
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
    line-height: 1.6;
  }

  /* Enhanced Typography Scale */
  h1 {
    @apply text-3xl md:text-4xl lg:text-5xl font-bold tracking-tight;
    line-height: 1.2;
  }

  h2 {
    @apply text-2xl md:text-3xl lg:text-4xl font-semibold tracking-tight;
    line-height: 1.3;
  }

  h3 {
    @apply text-xl md:text-2xl lg:text-3xl font-semibold tracking-tight;
    line-height: 1.4;
  }

  h4 {
    @apply text-lg md:text-xl font-medium tracking-tight;
    line-height: 1.4;
  }

  h5 {
    @apply text-base md:text-lg font-medium;
    line-height: 1.5;
  }

  h6 {
    @apply text-sm md:text-base font-medium;
    line-height: 1.5;
  }

  p {
    @apply text-base leading-relaxed;
  }

  small {
    @apply text-sm;
  }
  
  input, select, textarea {
    font-size: max(16px, 1rem) !important;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    border-radius: 0;
    background-clip: padding-box;
    font-family: inherit;
    transition: all 0.2s ease-out;
  }
  
  button {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    border-radius: 0;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
    font-family: inherit;
    transition: all 0.2s ease-out;
  }

  /* Focus Management for Accessibility */
  :focus-visible {
    outline: 2px solid rgb(var(--primary));
    outline-offset: 2px;
  }

  /* Reduce motion for accessibility */
  @media (prefers-reduced-motion: reduce) {
    * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }
}

/* Enhanced Material Design 3 Utilities */
@layer utilities {
  /* Enhanced Material Design 3 Elevation System with dynamic colors */
  .elevation-0 {
    box-shadow: none;
  }
  
  .elevation-1 {
    box-shadow: 
      0px 1px 2px 0px rgba(0, 0, 0, 0.3), 
      0px 1px 3px 1px rgba(0, 0, 0, 0.15);
  }
  
  .elevation-2 {
    box-shadow: 
      0px 1px 2px 0px rgba(0, 0, 0, 0.3), 
      0px 2px 6px 2px rgba(0, 0, 0, 0.15);
  }
  
  .elevation-3 {
    box-shadow: 
      0px 1px 3px 0px rgba(0, 0, 0, 0.3), 
      0px 4px 8px 3px rgba(0, 0, 0, 0.15);
  }
  
  .elevation-4 {
    box-shadow: 
      0px 2px 3px 0px rgba(0, 0, 0, 0.3), 
      0px 6px 10px 4px rgba(0, 0, 0, 0.15);
  }
  
  .elevation-5 {
    box-shadow: 
      0px 4px 4px 0px rgba(0, 0, 0, 0.3), 
      0px 8px 12px 6px rgba(0, 0, 0, 0.15);
  }

  /* Enhanced elevation with primary color tint */
  .elevation-primary-1 {
    box-shadow: 
      0px 1px 2px 0px rgba(var(--primary) / 0.2), 
      0px 1px 3px 1px rgba(var(--primary) / 0.1);
  }
  
  .elevation-primary-2 {
    box-shadow: 
      0px 1px 2px 0px rgba(var(--primary) / 0.25), 
      0px 2px 6px 2px rgba(var(--primary) / 0.15);
  }
  
  .elevation-primary-3 {
    box-shadow: 
      0px 1px 3px 0px rgba(var(--primary) / 0.3), 
      0px 4px 8px 3px rgba(var(--primary) / 0.2);
  }

  /* Ripple Effect for Buttons */
  .ink-ripple {
    position: relative;
    overflow: hidden;
    /* For safari bug */
    transform: translateZ(0); 
  }

  .ripple-effect {
    position: absolute;
    border-radius: 50%;
    transform: scale(0);
    animation: ripple 600ms linear;
    @apply bg-white/70;
  }

  .dark .ripple-effect {
    @apply bg-black/30;
  }

  @keyframes ripple {
    to {
      transform: scale(4);
      opacity: 0;
    }
  }

  /* Material Design 3 Surface Colors */
  .surface-container-lowest {
    @apply bg-[rgb(var(--surface-container-lowest))];
  }
  
  .surface-container-low {
    @apply bg-[rgb(var(--surface-container-low))];
  }
  
  .surface-container {
    @apply bg-[rgb(var(--surface-container))];
  }
  
  .surface-container-high {
    @apply bg-[rgb(var(--surface-container-high))];
  }
  
  .surface-container-highest {
    @apply bg-[rgb(var(--surface-container-highest))];
  }

  /* Enhanced Material Motion System */
  .material-transition {
    transition: all 300ms cubic-bezier(0.4, 0.0, 0.2, 1);
  }

  .material-transition-fast {
    transition: all 200ms cubic-bezier(0.4, 0.0, 0.2, 1);
  }

  .material-transition-slow {
    transition: all 500ms cubic-bezier(0.4, 0.0, 0.2, 1);
  }

  .material-transition-decelerate {
    transition: all 300ms cubic-bezier(0.0, 0.0, 0.2, 1);
  }

  .material-transition-accelerate {
    transition: all 300ms cubic-bezier(0.4, 0.0, 1, 1);
  }

  .material-transition-standard {
    transition: all 300ms cubic-bezier(0.2, 0.0, 0, 1);
  }

  /* Interactive states */
  .interactive-scale {
    @apply material-transition-fast transform-gpu;
  }

  .interactive-scale:hover {
    transform: scale(1.02);
  }

  .interactive-scale:active {
    transform: scale(0.98);
  }

  .interactive-lift {
    @apply material-transition transform-gpu;
  }

  .interactive-lift:hover {
    transform: translateY(-2px);
  }

  .interactive-lift:active {
    transform: translateY(0px);
  }

  /* Enhanced responsive utilities with improved spacing */
  .responsive-container {
    @apply w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
  }
  
  .responsive-padding {
    @apply px-4 sm:px-6 md:px-8 lg:px-12;
  }
  
  .responsive-padding-y {
    @apply py-4 sm:py-6 md:py-8 lg:py-12;
  }
  
  .responsive-grid {
    @apply grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-3 sm:gap-4 md:gap-5 lg:gap-6;
  }
  
  .responsive-station-grid {
    @apply grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-7 gap-3 sm:gap-4;
  }

  /* Responsive text scaling */
  .responsive-text-sm {
    @apply text-xs sm:text-sm;
  }
  
  .responsive-text-base {
    @apply text-sm sm:text-base;
  }
  
  .responsive-text-lg {
    @apply text-base sm:text-lg md:text-xl;
  }
  
  .responsive-text-xl {
    @apply text-lg sm:text-xl md:text-2xl;
  }

  /* Enhanced spacing system */
  .space-micro {
    @apply space-y-1;
  }
  
  .space-xs {
    @apply space-y-2;
  }
  
  .space-sm {
    @apply space-y-3;
  }
  
  .space-md {
    @apply space-y-4 sm:space-y-6;
  }
  
  .space-lg {
    @apply space-y-6 sm:space-y-8;
  }
  
  .space-xl {
    @apply space-y-8 sm:space-y-12;
  }
  
  /* Enhanced iOS Safe Area Support */
  .ios-safe-top {
    padding-top: max(env(safe-area-inset-top), 1rem);
  }
  
  .ios-safe-bottom {
    padding-bottom: max(env(safe-area-inset-bottom), 1rem);
  }
  
  .ios-safe-left {
    padding-left: max(env(safe-area-inset-left), 0px);
  }
  
  .ios-safe-right {
    padding-right: max(env(safe-area-inset-right), 0px);
  }
  
  .ios-touch-target {
    min-height: 44px;
    min-width: 44px;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }

  .ios-vh-fix {
    min-height: 100vh;
    min-height: -webkit-fill-available;
  }
  
  .ios-no-bounce {
    overscroll-behavior: none;
    -webkit-overflow-scrolling: touch;
  }
  
  .ios-smooth-scroll {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
  }

  /* Enhanced glassmorphism effects with better performance */
  .glass-surface {
    backdrop-filter: blur(16px) saturate(180%);
    -webkit-backdrop-filter: blur(16px) saturate(180%);
    background: rgba(var(--surface-container) / 0.9);
    border: 1px solid rgba(var(--outline-variant) / 0.2);
  }
  
  .glass-primary {
    backdrop-filter: blur(16px) saturate(180%);
    -webkit-backdrop-filter: blur(16px) saturate(180%);
    background: rgba(var(--primary-container) / 0.8);
    border: 1px solid rgba(var(--primary) / 0.2);
  }

  .glass-card {
    backdrop-filter: blur(12px) saturate(150%);
    -webkit-backdrop-filter: blur(12px) saturate(150%);
    background: rgba(var(--surface-container) / 0.7);
    border: 1px solid rgba(var(--outline-variant) / 0.15);
  }

  /* Modern card styling */
  .modern-card {
    @apply glass-card elevation-1 rounded-2xl material-transition interactive-lift;
    border-radius: 1rem;
  }

  .modern-card:hover {
    @apply elevation-3;
  }

  /* Enhanced button states */
  .button-press-effect {
    @apply material-transition-fast transform-gpu active:scale-95;
  }

  /* Status indicators */
  .status-indicator {
    @apply relative;
  }

  .status-indicator::after {
    content: '';
    @apply absolute -top-1 -right-1 w-3 h-3 bg-primary rounded-full ring-2 ring-background animate-pulse;
  }

  .status-indicator.playing::after {
    @apply bg-green-500;
  }

  .status-indicator.buffering::after {
    @apply bg-yellow-500;
  }

  .status-indicator.error::after {
    @apply bg-red-500;
  }

  /* Enhanced metallic theme contouring */
  .metallic body,
  .metallic h1,
  .metallic h2,
  .metallic h3,
  .metallic p,
  .metallic span,
  .metallic a,
  .metallic button,
  .metallic label {
    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.5);
  }

  .metallic svg {
    filter: drop-shadow(0 1px 1px rgba(0, 0, 0, 0.6));
  }

  .metallic .elevation-1 {
    box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.5), 0px 1px 3px 1px rgba(0, 0, 0, 0.3);
  }
  .metallic .elevation-2 {
    box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.5), 0px 2px 6px 2px rgba(0, 0, 0, 0.3);
  }
  .metallic .elevation-3 {
    box-shadow: 0px 1px 3px 0px rgba(0, 0, 0, 0.5), 0px 4px 8px 3px rgba(0, 0, 0, 0.3);
  }
  .metallic .elevation-4 {
    box-shadow: 0px 2px 3px 0px rgba(0, 0, 0, 0.5), 0px 6px 10px 4px rgba(0, 0, 0, 0.3);
  }
  .metallic .elevation-5 {
    box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.5), 0px 8px 12px 6px rgba(0, 0, 0, 0.3);
  }
}

/* Enhanced iOS specific improvements */
@supports (-webkit-touch-callout: none) {
  .ios-vh-fix {
    height: 100vh;
    height: -webkit-fill-available;
    min-height: 100vh;
    min-height: -webkit-fill-available;
  }
  
  .ios-no-bounce {
    overscroll-behavior: none;
    overscroll-behavior-y: none;
  }
  
  .ios-smooth-scroll {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
  }

  input, select, textarea {
    font-size: max(16px, 1rem) !important;
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
  }
}

@media screen and (max-width: 640px) {
  .bottom-nav-ios {
    padding-bottom: max(calc(env(safe-area-inset-bottom) + 0.5rem), 1rem);
  }
  
  input, select, textarea, button {
    @apply text-base ios-touch-target;
    font-size: max(16px, 1rem) !important;
  }
  
  .touch-target {
    @apply ios-touch-target;
  }
}

@media (min-width: 768px) and (max-width: 1024px) {
  .responsive-grid {
    @apply grid-cols-2 lg:grid-cols-3;
  }
  
  body {
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }
}

@media screen and (orientation: landscape) and (max-device-width: 896px) {
  .ios-landscape-fix {
    padding-left: max(env(safe-area-inset-left), 0px);
    padding-right: max(env(safe-area-inset-right), 0px);
  }
}
